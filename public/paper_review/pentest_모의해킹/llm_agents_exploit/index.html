<!DOCTYPE html>
<html lang="ko" dir="auto" data-theme="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Research Review: LLM 에이전트의 자율적 One-day 취약점 익스플로잇 분석 | HJ&#39;s Security Note</title>
<meta name="keywords" content="Autonomous-Agent, LLM-Security, Exploit-Automation, GPT-4, ReAct, Cyber-Security, Adversarial-AI, One-day-Vulnerability">
<meta name="description" content="GPT-4 기반의 자율 에이전트가 별도의 힌트 없이도 실제 CVE 취약점을 스스로 익스플로잇할 수 있음을 실증하고, LLM의 공격적 활용 가능성과 그에 따른 보안 위협을 분석한 연구">
<meta name="author" content="">
<link rel="canonical" href="http://localhost:1313/paper_review/pentest_%EB%AA%A8%EC%9D%98%ED%95%B4%ED%82%B9/llm_agents_exploit/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.a29c24210eb31d9ce56f669c66a35c9c51b17376b7764e336a49af7dec914cf0.css" integrity="sha256-opwkIQ6zHZzlb2acZqNcnFGxc3a3dk4zakmvfeyRTPA=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="ko" href="http://localhost:1313/paper_review/pentest_%EB%AA%A8%EC%9D%98%ED%95%B4%ED%82%B9/llm_agents_exploit/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
                color-scheme: dark;
            }

            .list {
                background: var(--theme);
            }

            .toc {
                background: var(--entry);
            }
        }

        @media (prefers-color-scheme: light) {
            .list::-webkit-scrollbar-thumb {
                border-color: var(--code-bg);
            }
        }

    </style>
</noscript>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.querySelector("html").dataset.theme = 'dark';
    } else if (localStorage.getItem("pref-theme") === "light") {
       document.querySelector("html").dataset.theme = 'light';
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.querySelector("html").dataset.theme = 'dark';
    } else {
        document.querySelector("html").dataset.theme = 'light';
    }

</script>
</head>
<body id="top">
    <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="HJ&#39;s Security Note (Alt + H)">HJ&#39;s Security Note</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/about" title="소개">
                    <span>소개</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/categories/daily-logs/" title="Daily-Logs">
                    <span>일일 로그</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/" title="프로젝트">
                    <span>프로젝트</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/categories/cyber-law-study/" title="Cyber-Law-Study">
                    <span>보안법 공부</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/categories/security-issues-analysis/" title="Security-Issues-Analysis">
                    <span>보안 시사 분석</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tags">
                    <span>태그</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/categories/paper-review/" title="Paper-Review">
                    <span>논문 리뷰</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/">홈</a>&nbsp;»&nbsp;<a href="http://localhost:1313/paper_review/">논문 리뷰</a></div>
    <h1 class="post-title entry-hint-parent">
      Research Review: LLM 에이전트의 자율적 One-day 취약점 익스플로잇 분석
    </h1>
    <div class="post-meta"><span title='2025-11-22 00:00:00 +0000 UTC'>2025년 11월 22일</span>

</div>
  </header> 
  <div class="post-content"><h1 id="research-review-llm-agents-can-autonomously-exploit-one-day-vulnerabilities">Research Review: LLM Agents can Autonomously Exploit One-day Vulnerabilities<a hidden class="anchor" aria-hidden="true" href="#research-review-llm-agents-can-autonomously-exploit-one-day-vulnerabilities">#</a></h1>
<blockquote>
<p><strong>Analyzed Date:</strong> 2025.11.22
<strong>Keywords:</strong> Autonomous Agent, LLM Security, Automated Exploitation, ReAct, GPT-4, Adversarial AI
<strong>Source:</strong> <a href="https://arxiv.org/abs/2404.08144">arXiv:2404.08144</a></p>
</blockquote>
<hr>
<h2 id="day-1--research-context--motivation">Day 1 – Research Context &amp; Motivation<a hidden class="anchor" aria-hidden="true" href="#day-1--research-context--motivation">#</a></h2>
<h3 id="자율-공격-에이전트의-등장-배경-및-연구의-필요성">자율 공격 에이전트의 등장 배경 및 연구의 필요성<a hidden class="anchor" aria-hidden="true" href="#자율-공격-에이전트의-등장-배경-및-연구의-필요성">#</a></h3>
<h4 id="1-심화-배경-in-depth-background">1. 심화 배경 (In-depth Background)<a hidden class="anchor" aria-hidden="true" href="#1-심화-배경-in-depth-background">#</a></h4>
<ul>
<li>
<p><strong>The Patching Gap &amp; N-day Vulnerabilities</strong></p>
</li>
<li>
<p>보안 산업의 핵심 과제는 패치 배포 속도가 공격 기술의 발전 속도를 따라가지 못한다는 점입니다.</p>
</li>
<li>
<p>제로데이(Zero-day)보다 더 빈번하고 치명적인 위협은 패치가 공개되었으나 미처 적용되지 않은 <strong>N-day(One-day) 취약점</strong>입니다. 공격자는 패치 정보를 리버스 엔지니어링하여 신속하게 익스플로잇을 제작합니다.</p>
</li>
<li>
<p><strong>기존 자동화 도구의 한계</strong></p>
</li>
<li>
<p><strong>취약점 스캐너(Nessus, OpenVAS):</strong> 버전 정보 기반의 탐지에 의존하므로 실제 공격 성공 가능성을 검증하지 못하며 높은 오탐율을 보입니다.</p>
</li>
<li>
<p><strong>자동화 익스플로잇 도구(Metasploit):</strong> 사전에 정의된 템플릿에 따라 동작하므로 타겟 시스템의 환경 변화나 예외 상황에 유연하게 대응하는 임기응변 능력이 결여되어 있습니다.</p>
</li>
</ul>
<h4 id="2-핵심-연구-질문-research-question">2. 핵심 연구 질문 (Research Question)<a hidden class="anchor" aria-hidden="true" href="#2-핵심-연구-질문-research-question">#</a></h4>
<ul>
<li>LLM이 단순한 코드 생성을 넘어, 실제 시스템과 상호작용하며 취약점을 식별하고 공격을 수행하는 자율 에이전트로서 기능할 수 있는가?</li>
<li>공격 대상에 대한 사전 지식 없이, 오직 CVE 설명서 정보만으로 익스플로잇을 성공시킬 수 있는가?</li>
</ul>
<h4 id="3-분석가-인사이트-analyst-insight">3. 분석가 인사이트 (Analyst Insight)<a hidden class="anchor" aria-hidden="true" href="#3-분석가-인사이트-analyst-insight">#</a></h4>
<ul>
<li>본 연구는 AI 보안의 패러다임을 방어 중심에서 공격 중심(Offense-centric)으로 확장했다는 점에서 중대한 의의를 가집니다.</li>
<li>기존 강화학습 기반 에이전트와 달리, LLM의 범용 추론 능력만으로도 복잡한 해킹 프로세스를 수행할 수 있음을 입증했습니다.</li>
</ul>
<hr>
<h2 id="day-2--system-architecture--design">Day 2 – System Architecture &amp; Design<a hidden class="anchor" aria-hidden="true" href="#day-2--system-architecture--design">#</a></h2>
<h3 id="llm-에이전트와-해킹-도구-제어-구조">LLM 에이전트와 해킹 도구 제어 구조<a hidden class="anchor" aria-hidden="true" href="#llm-에이전트와-해킹-도구-제어-구조">#</a></h3>
<h4 id="1-시스템-아키텍처-상세-detailed-architecture">1. 시스템 아키텍처 상세 (Detailed Architecture)<a hidden class="anchor" aria-hidden="true" href="#1-시스템-아키텍처-상세-detailed-architecture">#</a></h4>
<p>본 시스템은 추가적인 학습 없이 LLM과 운영체제 인터페이스의 결합으로 구성되었습니다.</p>
<table>
  <thead>
      <tr>
          <th>구성요소</th>
          <th>상세 역할</th>
          <th>구현 기술</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>Agent Brain</strong></td>
          <td>공격 시나리오 기획 및 실행 결과 해석, 차순위 행동 결정</td>
          <td>GPT-4 (GPT-4-1106-preview)</td>
      </tr>
      <tr>
          <td><strong>Prompt Engine</strong></td>
          <td>페르소나 부여 및 공격 이력 관리를 통한 문맥 유지</td>
          <td>System Prompts, Sliding Window</td>
      </tr>
      <tr>
          <td><strong>Tool Interface</strong></td>
          <td>LLM의 명령을 OS 명령어로 변환하여 실행하는 추상화 계층</td>
          <td>Python subprocess, Docker Exec</td>
      </tr>
      <tr>
          <td><strong>Environment</strong></td>
          <td>취약점이 존재하는 격리된 샌드박스 환경</td>
          <td>Docker Containers</td>
      </tr>
  </tbody>
</table>
<h4 id="2-에이전트-사용-도구-tools-definition">2. 에이전트 사용 도구 (Tools Definition)<a hidden class="anchor" aria-hidden="true" href="#2-에이전트-사용-도구-tools-definition">#</a></h4>
<p>효율적인 공격 수행을 위해 4가지 핵심 도구를 제공합니다.</p>
<ol>
<li><strong>Terminal:</strong> 쉘 명령어 실행 및 표준 출력 결과 확인.</li>
<li><strong>File Editor:</strong> 공격 스크립트 작성 및 수정 (토큰 최적화를 위해 라인 단위 수정 방식 채택).</li>
<li><strong>Web Browser:</strong> Playwright 기반으로 웹 애플리케이션 취약점(XSS, SQLi 등) 공격 수행.</li>
<li><strong>Code Interpreter:</strong> 작성된 Python 코드를 즉시 실행하고 결과 검증.</li>
</ol>
<hr>
<h2 id="day-3--methodology-the-reasoning-loop">Day 3 – Methodology: The Reasoning Loop<a hidden class="anchor" aria-hidden="true" href="#day-3--methodology-the-reasoning-loop">#</a></h2>
<h3 id="react-프레임워크-기반의-추론-및-행동-알고리즘">ReAct 프레임워크 기반의 추론 및 행동 알고리즘<a hidden class="anchor" aria-hidden="true" href="#react-프레임워크-기반의-추론-및-행동-알고리즘">#</a></h3>
<h4 id="1-react-reason--act-알고리즘-적용">1. ReAct (Reason + Act) 알고리즘 적용<a hidden class="anchor" aria-hidden="true" href="#1-react-reason--act-알고리즘-적용">#</a></h4>
<p>논리적 완결성을 위해 에이전트는 매 단계마다 **[Thought] → [Action] → [Observation]**의 반복 주기를 수행합니다.</p>
<p><strong>Log4j 익스플로잇 시나리오 예시</strong></p>
<ul>
<li><strong>Thought:</strong> CVE 분석 결과 Log4j 취약점임을 확인. JNDI Lookup을 유발하는 헤더 전송이 필요함.</li>
<li><strong>Action:</strong> 타겟 서버 상태 점검을 위해 <code>curl</code> 명령 실행.</li>
<li><strong>Observation:</strong> <code>HTTP/1.1 200 OK</code> 확인.</li>
<li><strong>Thought:</strong> 서버 활성화 확인. 공격자 LDAP 서버 개설 및 악성 페이로드 전송 스크립트 작성 필요.</li>
<li><strong>Action:</strong> <code>exploit.py</code> 파일 생성 및 실행.</li>
<li><strong>Observation:</strong> <code>Connection Refused</code> 발생 (공격 실패).</li>
<li><strong>Self-Correction:</strong> 연결 거부 원인을 분석하여 방화벽 우회를 위해 포트 변경 후 재시도 결정.</li>
</ul>
<p><strong>핵심 차별점:</strong> 에이전트는 실행 오류를 실패로 간주하지 않고 계획 수정을 위한 새로운 정보로 인식합니다.</p>
<h4 id="2-컨텍스트-관리-context-truncation">2. 컨텍스트 관리 (Context Truncation)<a hidden class="anchor" aria-hidden="true" href="#2-컨텍스트-관리-context-truncation">#</a></h4>
<p>장기화되는 공격 과정에서 발생하는 대량의 로그를 요약하거나 중요도가 낮은 정보를 절삭하여, LLM의 입력 한도 내에서 핵심 문맥을 유지하도록 설계되었습니다.</p>
<hr>
<h2 id="day-4--experiments--evaluation">Day 4 – Experiments &amp; Evaluation<a hidden class="anchor" aria-hidden="true" href="#day-4--experiments--evaluation">#</a></h2>
<h3 id="성능-분석-및-인간-전문가-대비-비용-효율성">성능 분석 및 인간 전문가 대비 비용 효율성<a hidden class="anchor" aria-hidden="true" href="#성능-분석-및-인간-전문가-대비-비용-효율성">#</a></h3>
<h4 id="1-실험-환경-및-지표-setup">1. 실험 환경 및 지표 (Setup)<a hidden class="anchor" aria-hidden="true" href="#1-실험-환경-및-지표-setup">#</a></h4>
<ul>
<li><strong>Dataset:</strong> 15개의 실제 One-day 취약점 (Web, Container, Python Library 등).</li>
<li><strong>Metrics:</strong> 성공률(Success Rate), API 토큰 기반 비용(Cost), 소요 단계(Turns).</li>
</ul>
<h4 id="2-주요-결과-비교-performance-comparison">2. 주요 결과 비교 (Performance Comparison)<a hidden class="anchor" aria-hidden="true" href="#2-주요-결과-비교-performance-comparison">#</a></h4>
<table>
  <thead>
      <tr>
          <th>모델</th>
          <th>성공률</th>
          <th>평균 비용</th>
          <th>비고</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>GPT-4 (Proposed)</strong></td>
          <td><strong>87% (13/15)</strong></td>
          <td><strong>$8.80</strong></td>
          <td>유일하게 유의미한 공격 성과 달성</td>
      </tr>
      <tr>
          <td>GPT-3.5 Turbo</td>
          <td>0%</td>
          <td>$0.00</td>
          <td>복잡한 계획 수립 단계에서 실패</td>
      </tr>
      <tr>
          <td>LLaMA-2 (70B)</td>
          <td>0%</td>
          <td>-</td>
          <td>환각 현상 및 문맥 유지 실패</td>
      </tr>
      <tr>
          <td>ZAP (Scanner)</td>
          <td>0%</td>
          <td>-</td>
          <td>알려진 패턴 외 논리적 취약점 탐지 불가</td>
      </tr>
  </tbody>
</table>
<p><strong>분석 결과:</strong> GPT-4급 모델만이 계획 수립 및 자가 수정 능력을 갖추었으며, 하위 모델들은 오류 발생 시 동일한 행동을 무의미하게 반복하는 경향을 보였습니다.</p>
<h4 id="3-비용-효율성-cost-analysis">3. 비용 효율성 (Cost Analysis)<a hidden class="anchor" aria-hidden="true" href="#3-비용-효율성-cost-analysis">#</a></h4>
<ul>
<li>인간 보안 전문가의 투입 비용 대비, GPT-4 에이전트는 건당 평균 약 12,000원의 비용으로 공격을 완료했습니다.</li>
<li>이는 공격 비용을 기존 대비 1/20 이하로 절감시켜, 사이버 공격의 진입 장벽이 극도로 낮아졌음을 시사합니다.</li>
</ul>
<hr>
<h2 id="day-5--conclusion-limitations--future-work">Day 5 – Conclusion, Limitations &amp; Future Work<a hidden class="anchor" aria-hidden="true" href="#day-5--conclusion-limitations--future-work">#</a></h2>
<h3 id="보안-패러다임의-전환과-제언">보안 패러다임의 전환과 제언<a hidden class="anchor" aria-hidden="true" href="#보안-패러다임의-전환과-제언">#</a></h3>
<h4 id="1-결론-conclusion">1. 결론 (Conclusion)<a hidden class="anchor" aria-hidden="true" href="#1-결론-conclusion">#</a></h4>
<p>본 연구는 GPT-4 수준의 LLM이 CVE 설명서만으로도 스스로 도구를 선택하고 계획을 수정하며 시스템 권한을 탈취할 수 있음을 입증했습니다. 이는 향후 사이버 보안 환경이 <strong>AI 대 AI</strong>의 대결 구도로 재편될 것임을 예고합니다.</p>
<h4 id="2-한계점-limitations">2. 한계점 (Limitations)<a hidden class="anchor" aria-hidden="true" href="#2-한계점-limitations">#</a></h4>
<ol>
<li><strong>범위의 제한:</strong> 웹 및 서버 취약점에 집중되어 있으며, 바이너리 리버싱이나 저수준(Low-level) 해킹 능력에 대한 검증은 아직 부족합니다.</li>
<li><strong>모델 의존성:</strong> 특정 상용 API에 의존하므로 보안 필터링 정책에 따라 가용성이 제한될 수 있습니다.</li>
<li><strong>비결정성:</strong> 동일한 환경에서도 결과가 상이하게 도출될 수 있어 공격의 일관된 신뢰성 확보가 과제로 남습니다.</li>
</ol>
<h4 id="3-향후-연구-방향-future-work">3. 향후 연구 방향 (Future Work)<a hidden class="anchor" aria-hidden="true" href="#3-향후-연구-방향-future-work">#</a></h4>
<ul>
<li><strong>보안 특화 소형 LLM:</strong> LLaMA-3 등을 파인튜닝하여 비용 효율적이고 검열에서 자유로운 에이전트 연구.</li>
<li><strong>멀티 에이전트 협업:</strong> 정찰, 분석, 침투 등으로 역할을 분담한 군집 공격 시스템.</li>
<li><strong>자동 방어(Auto-Patching):</strong> 공격 기술을 역이용하여 취약점 발견 즉시 패치를 생성하는 방어 체계.</li>
</ul>
<h4 id="4-실무자를-위한-제언-takeaway">4. 실무자를 위한 제언 (Takeaway)<a hidden class="anchor" aria-hidden="true" href="#4-실무자를-위한-제언-takeaway">#</a></h4>
<p>보안 전문가는 이제 단순한 취약점 진단 능력을 넘어 AI 에이전트가 이해하기 어려운 복잡한 비즈니스 로직 결함을 식별하는 능력을 갖추어야 합니다. 방어 측면에서는 기계적 속도로 진행되는 공격에 대응하기 위해 AI-SOC 기반의 자동화된 대응 체계 구축이 필수적입니다.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/autonomous-agent/">Autonomous-Agent</a></li>
      <li><a href="http://localhost:1313/tags/llm-security/">LLM-Security</a></li>
      <li><a href="http://localhost:1313/tags/exploit-automation/">Exploit-Automation</a></li>
      <li><a href="http://localhost:1313/tags/gpt-4/">GPT-4</a></li>
      <li><a href="http://localhost:1313/tags/react/">ReAct</a></li>
      <li><a href="http://localhost:1313/tags/cyber-security/">Cyber-Security</a></li>
      <li><a href="http://localhost:1313/tags/adversarial-ai/">Adversarial-AI</a></li>
      <li><a href="http://localhost:1313/tags/one-day-vulnerability/">One-Day-Vulnerability</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2026 <a href="http://localhost:1313/">HJ&#39;s Security Note</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu');
    if (menu) {
        
        const scrollPosition = localStorage.getItem("menu-scroll-position");
        if (scrollPosition) {
            menu.scrollLeft = parseInt(scrollPosition, 10);
        }
        
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        const html = document.querySelector("html");
        if (html.dataset.theme === "dark") {
            html.dataset.theme = 'light';
            localStorage.setItem("pref-theme", 'light');
        } else {
            html.dataset.theme = 'dark';
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
